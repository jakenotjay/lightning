(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,a,t){e.exports=t(319)},319:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),l=t.n(o),i=t(44),c=t(38),s=t(13),u=t.n(s),m=t(20),d=t(32),p=t(23),h=t(35),g=t(33),f=t(15),E=t(36),b=t(352),v=t(370),w=t(356),C=t(354),y=t(355),k=t(353),O=t(351),j=t(350),R=t(368),x=t(78),T=t.n(x),D=t(110),N=t(320),P=t(349),S=Object(N.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function I(e){var a=S();return r.a.createElement(P.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(O.a,{className:a.avatar},r.a.createElement(T.a,null)),r.a.createElement(D.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e.email,onChange:e.handleEmailChange}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:e.handlePasswordChange}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"PhoneNumber",name:"phone",autoComplete:"phone",value:e.phoneNumber,onChange:e.handlePhoneChange}),r.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:e.newUser},"Sign Up"))))}var L=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).newUser=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/newUser",e.next=3,fetch("/api/newUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t.state.email,password:t.state.password,phoneNumber:t.state.phoneNumber})}).then(function(e){return e.json()}).then(function(e){e.success?t.setState({alertTitle:"Account Created Successfully",alertText:"Please contact an administrator to get your account verified",open:!0}):t.setState({alertTitle:"Failed to create an account",alertText:e.reason,open:!0})});case 3:case"end":return e.stop()}},e)})),t.state={email:"",password:"",phoneNumber:"",open:!1,alertTitle:"",alertText:""},t.handleEmailChange=t.handleEmailChange.bind(Object(f.a)(t)),t.handlePasswordChange=t.handlePasswordChange.bind(Object(f.a)(t)),t.handlePhoneChange=t.handlePhoneChange.bind(Object(f.a)(t)),t.newUser=t.newUser.bind(Object(f.a)(t)),t.handleClose=t.handleClose.bind(Object(f.a)(t)),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handlePhoneChange",value:function(e){this.setState({phoneNumber:e.target.value})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I,{email:this.state.email,password:this.state.password,phoneNumber:this.state.phoneNumber,handleEmailChange:this.handleEmailChange,handlePasswordChange:this.handlePasswordChange,handlePhoneChange:this.handlePhoneChange,newUser:this.newUser}),r.a.createElement(v.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(k.a,{id:"alert-dialog-title"},this.state.alertTitle),r.a.createElement(C.a,null,r.a.createElement(y.a,{id:"alert-dialog-description"},this.state.alertText)),r.a.createElement(w.a,null,r.a.createElement(b.a,{onClick:this.handleClose,color:"primary"},"Okay"))))}}]),a}(r.a.Component),U=t(365),W=t(154),A=t(359),B=t(153),M=t(357),q=t(358),z=t(371),F=t(146),X=t.n(F),G=t(145),J=t.n(G),V=Object(N.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});var Z=function(){var e=V(),a=r.a.useState(null),t=Object(W.a)(a,2),n=t[0],o=t[1],l=Boolean(n),c=r.a.forwardRef(function(e,a){return r.a.createElement(i.b,Object.assign({innerRef:a},e))});function s(){o(null)}return r.a.createElement("div",{className:e.root},r.a.createElement(M.a,{position:"static"},r.a.createElement(q.a,null,r.a.createElement(A.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",component:c,to:"/reports"},r.a.createElement(J.a,null)),r.a.createElement(D.a,{variant:"h6",className:e.title},"Lightning Flash"),r.a.createElement("div",null,r.a.createElement(A.a,{"aria-label":"Account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement(X.a,null)),r.a.createElement(B.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:s},r.a.createElement(z.a,{onClick:s},"Profile"),r.a.createElement(z.a,{onClick:s},"My Account"))))))},H=t(360),K=t(364),Q=t(363),$=t(361),_=t(362),Y=t(321),ee=t(147),ae=t.n(ee),te=Object(N.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"}}}),ne=r.a.forwardRef(function(e,a){return r.a.createElement(i.b,Object.assign({innerRef:a},e))});var re=function(e){var a=te(),t=e.Reports;return r.a.createElement(Y.a,{className:a.root},r.a.createElement(H.a,null,r.a.createElement($.a,null,r.a.createElement(_.a,null,r.a.createElement(Q.a,null,"Date"),r.a.createElement(Q.a,null,"Time"),r.a.createElement(Q.a,null,"Location"),r.a.createElement(Q.a,null,"Type"),r.a.createElement(Q.a,{align:"right"},"Link",r.a.createElement(A.a,{onClick:e.refresh()},r.a.createElement(ae.a,null))))),r.a.createElement(K.a,null,t.map(function(e){return r.a.createElement(_.a,{key:e.ReportID},r.a.createElement(Q.a,{component:"th",scope:"row"},e.Date),r.a.createElement(Q.a,null,e.Time),r.a.createElement(Q.a,null,e.Location),r.a.createElement(Q.a,null,e.Triangulated?"Triangulated":"Individual"),r.a.createElement(Q.a,{align:"right"},r.a.createElement(b.a,{variant:"contained",color:"primary",component:ne,to:{pathname:"/report"+e.ReportID,state:{Reports:[e]}}},"View")))}))))},oe=t(148),le=t.n(oe),ie=t(149),ce=t.n(ie);var se=function(e){var a={center:{lat:51.2437,lng:-.5896},zoom:16};return r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement(le.a,{bootstrapURLKeys:{key:"AIzaSyCxuG_WgDO0BcoObCchcg2FP2P8teJnBiQ"},defaultCenter:a.center,defaultZoom:a.zoom},e.Reports.map(function(e){return r.a.createElement(ce.a,{key:e.ReportID,lat:e.Latitude,lng:e.Longitude})})))},ue=Object(N.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto",height:"732px"}}});var me=function(e){var a=ue();return r.a.createElement(Y.a,{className:a.root},r.a.createElement(se,{Reports:e.Reports}))},de=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).getReports=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/reports").then(function(){var e=Object(m.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.json());case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()).then(function(e){return t.setState({Reports:e.ReportsData})});case 2:case"end":return e.stop()}},e)})),t.state={Reports:[{ReportID:null,Date:null,Time:null,Location:null,Longitude:null,Latitude:null,Triangulated:null,TriangulateID:null}]},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getReports()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,sm:7},r.a.createElement(re,{Reports:this.state.Reports,refresh:function(){return e.getReports}})),r.a.createElement(U.a,{item:!0,xs:12,sm:5},r.a.createElement(me,{Reports:this.state.Reports}))))}}]),a}(r.a.Component),pe=t(52),he=t.n(pe),ge=Object(N.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"}}});var fe=function(e){var a=ge();return r.a.createElement(Y.a,{className:a.root},r.a.createElement(H.a,null,r.a.createElement($.a,null,r.a.createElement(_.a,null,r.a.createElement(Q.a,null,"Order"),r.a.createElement(Q.a,{align:"right"},"Reading"))),r.a.createElement(K.a,null,e.readings.map(function(e,a){return r.a.createElement(_.a,{key:a},r.a.createElement(Q.a,{component:"th",scope:"reading"},a),r.a.createElement(Q.a,{align:"right"},e))}))))},Ee=t(150),be=he()(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"}}});var ve=function(e){var a=be(),t={labels:e.indexes,datasets:[{label:"Sensor Reading Values",data:e.readings,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,fill:!1}]};return r.a.createElement(Y.a,{className:a.root},r.a.createElement(Ee.a,{data:t,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}))},we=t(366),Ce=t(152),ye=t.n(Ce),ke=t(109),Oe=t.n(ke),je=he()(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},buttonGroup:{margin:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)}}});var Re=function(e){var a=je();return r.a.createElement(Y.a,{className:a.root},r.a.createElement(U.a,{container:!0},r.a.createElement(U.a,{item:!0,sm:12,md:12,className:a.buttonGroup},r.a.createElement(we.a,{fullWidth:!0,variant:"contained",color:"primary","aria-label":"Save options",size:"large"},r.a.createElement(b.a,{onClick:e.getReadingstxt()},r.a.createElement(Oe.a,{className:a.leftIcon}),".txt"),r.a.createElement(b.a,{onClick:e.getReadingscsv()},r.a.createElement(Oe.a,{className:a.leftIcon}),".csv"),r.a.createElement(b.a,{onClick:e.copyToClip()},r.a.createElement(ye.a,{className:a.leftIcon}),"Copy")))))},xe=he()(function(e){return{root:{width:"100%",overflowX:"auto",height:"100%",marginTop:e.spacing(3),maxHeight:"500px"}}});function Te(e){var a=xe();return r.a.createElement(Y.a,{className:a.root},r.a.createElement(se,{Reports:e.Reports}))}var De=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).getMapPoints=Object(m.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/mapPoints?reportID="+t.state.match.params.reportID,e.next=3,fetch(a).then(function(){var e=Object(m.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.json());case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()).then(function(e){t.setState({Locations:e.Locations})});case 3:case"end":return e.stop()}},e)})),t.getReadings=Object(m.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/readings?reportID="+t.state.match.params.reportID,e.next=3,fetch(a).then(function(){var e=Object(m.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.json());case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()).then(function(e){t.setState({allReadings:e.ReadingsData});for(var a=e.ReadingsData,n=a.length,r=Math.floor(n/20),o=[],l=0;l<n;l+=r)o.push(a[l].ReadingData);var i=o.map(function(e,a){return a});t.setState({Readings:o,Indexes:i})});case 3:case"end":return e.stop()}},e)})),t.getReadingstxt=Object(m.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/readingstxt?reportID="+t.state.match.params.reportID,e.next=3,fetch(a).then(function(e){return e.blob()}).then(function(e){var a=window.URL.createObjectURL(e),t=document.createElement("a");t.style.display="none",t.href=a,t.download="readings.txt",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a)});case 3:case"end":return e.stop()}},e)})),t.getReadingscsv=Object(m.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/readingscsv?reportID="+t.state.match.params.reportID,e.next=3,fetch(a).then(function(e){return e.blob()}).then(function(e){var a=window.URL.createObjectURL(e),t=document.createElement("a");t.style.display="none",t.href=a,t.download="readings.csv",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a)});case 3:case"end":return e.stop()}},e)})),t.state={Reports:e.location.state.Reports,match:e.match,Readings:[],Indexes:[],Locations:[{ReportID:null,DateTime:null,Location:null,Longitude:null,Latitude:null}]},t.getReadings=t.getReadings.bind(Object(f.a)(t)),t.copyToClip=t.copyToClip.bind(Object(f.a)(t)),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getReadings(),this.getMapPoints()}},{key:"copyToClip",value:function(){var e=this;navigator.permissions.query({name:"clipboard-write"}).then(function(a){if("granted"===a.state||"prompt"===a.state){var t="";e.state.Readings.forEach(function(e){t+=e+"\n"}),navigator.clipboard.writeText(t).then(function(){})}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(U.a,{container:!0,spacing:3},r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(ve,{readings:this.state.Readings,indexes:this.state.Indexes}),r.a.createElement(Te,{Reports:this.state.Locations}),r.a.createElement(Re,{getReadingstxt:function(){return e.getReadingstxt},getReadingscsv:function(){return e.getReadingscsv},copyToClip:function(){return e.copyToClip}})),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(fe,{readings:this.state.Readings}))))}}]),a}(r.a.Component),Ne=t(367),Pe=Object(N.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function Se(e){var a=Pe();return r.a.createElement(P.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(O.a,{className:a.avatar},r.a.createElement(T.a,null)),r.a.createElement(D.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e.email,onChange:e.handleEmailChange}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:e.handlePasswordChange}),r.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:e.checkDetails},"Sign In"),r.a.createElement(U.a,{container:!0},r.a.createElement(U.a,{item:!0,xs:!0},r.a.createElement(Ne.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{href:"/SignUp",variant:"body2"},"Don't have an account? Sign Up"))))))}var Ie=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).checkDetails=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/checkUser",e.next=3,fetch("/api/checkUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t.state.email,password:t.state.password})}).then(function(e){return e.json()}).then(function(e){e.success?t.setState({success:!0}):t.setState({errorText:e.reason,open:!0})});case 3:case"end":return e.stop()}},e)})),t.state={email:"",password:"",open:!1,errorText:"",success:!1},t.handleEmailChange=t.handleEmailChange.bind(Object(f.a)(t)),t.handlePasswordChange=t.handlePasswordChange.bind(Object(f.a)(t)),t.checkDetails=t.checkDetails.bind(Object(f.a)(t)),t.handleClose=t.handleClose.bind(Object(f.a)(t)),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.success?r.a.createElement(c.a,{to:"/reports"}):r.a.createElement("div",null,r.a.createElement(Se,{email:this.state.email,password:this.state.password,handleEmailChange:this.handleEmailChange,handlePasswordChange:this.handlePasswordChange,checkDetails:this.checkDetails}),r.a.createElement(v.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(k.a,{id:"alert-dialog-title"},"Invalid Password"),r.a.createElement(C.a,null,r.a.createElement(y.a,{id:"alert-dialog-description"},this.state.errorText)),r.a.createElement(w.a,null,r.a.createElement(b.a,{onClick:this.handleClose,color:"primary"},"Okay")))))}}]),a}(r.a.Component),Le=function(){return r.a.createElement(i.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/SignUp",component:L}),r.a.createElement(c.b,{path:"/reports",component:de}),r.a.createElement(c.b,{path:"/report:reportID",component:De}),r.a.createElement(c.b,{path:"/",component:Ie})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[172,1,2]]]);
//# sourceMappingURL=main.dc282f7b.chunk.js.map